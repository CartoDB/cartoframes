{"parents": [], "prev": null, "next": null, "title": "cartoframes.viz.layer module", "meta": {}, "body": "<div class=\"section\" id=\"module-cartoframes.viz.layer\">\n<span id=\"cartoframes-viz-layer-module\"></span><h1>cartoframes.viz.layer module<a class=\"headerlink\" href=\"#module-cartoframes.viz.layer\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<dl class=\"class\">\n<dt id=\"cartoframes.viz.layer.Layer\">\n<em class=\"property\">class </em><code class=\"sig-prename descclassname\">cartoframes.viz.layer.</code><code class=\"sig-name descname\">Layer</code><span class=\"sig-paren\">(</span><em class=\"sig-param\">source</em>, <em class=\"sig-param\">style=None</em>, <em class=\"sig-param\">popup=None</em>, <em class=\"sig-param\">legend=None</em>, <em class=\"sig-param\">widgets=None</em>, <em class=\"sig-param\">credentials=None</em>, <em class=\"sig-param\">bounds=None</em><span class=\"sig-paren\">)</span><a class=\"headerlink\" href=\"#cartoframes.viz.layer.Layer\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Bases: <code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">object</span></code></p>\n<p>Layer to display data on a map. This class can be used as one or more\nlayers in <a class=\"reference internal\" href=\"../cartoframes.viz/#cartoframes.viz.Map\" title=\"cartoframes.viz.Map\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Map</span></code></a> or on its own in a Jupyter\nnotebook to get a preview of a Layer.</p>\n<dl class=\"field-list simple\">\n<dt class=\"field-odd\">Parameters</dt>\n<dd class=\"field-odd\"><ul class=\"simple\">\n<li><p><strong>source</strong> (str, <a class=\"reference internal\" href=\"../cartoframes.data/#cartoframes.data.Dataset\" title=\"cartoframes.data.Dataset\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Dataset</span></code></a>, or pandas.DataFrame) \u2013 The source data.</p></li>\n<li><p><strong>style</strong> (str, dict, or <a class=\"reference internal\" href=\"../cartoframes.viz/#cartoframes.viz.Style\" title=\"cartoframes.viz.Style\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Style</span></code></a>, optional) \u2013 The style of the visualization: <a class=\"reference external\" href=\"https://carto.com/developers/carto-vl/guides/style-with-expressions/\">CARTO VL styling</a>.</p></li>\n<li><p><strong>popup</strong> (dict or <a class=\"reference internal\" href=\"../cartoframes.viz/#cartoframes.viz.Popup\" title=\"cartoframes.viz.Popup\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Popup</span></code></a>, optional) \u2013 This option adds interactivity (click and hover) to a layer to show popups.\nThe columns to be shown must be added in a list format for each event. It\nmust be written using <a class=\"reference external\" href=\"https://carto.com/developers/carto-vl/reference/#cartoexpressions\">CARTO VL expressions syntax</a>.\nSee <a class=\"reference internal\" href=\"../cartoframes.viz/#cartoframes.viz.Popup\" title=\"cartoframes.viz.Popup\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Popup</span></code></a> for more information.</p></li>\n<li><p><strong>legend</strong> (dict or <a class=\"reference internal\" href=\"../cartoframes.viz/#cartoframes.viz.Legend\" title=\"cartoframes.viz.Legend\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Legend</span></code></a>, optional) \u2013 The legend definition for a layer. It contains the information\nto show a legend \u201ctype\u201d (<code class=\"docutils literal notranslate\"><span class=\"pre\">color-category</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">color-bins</span></code>,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">color-continuous</span></code>), \u201cprop\u201d (color) and also text information:\n\u201ctitle\u201d, \u201cdescription\u201d and \u201cfooter\u201d. See <a class=\"reference internal\" href=\"../cartoframes.viz/#cartoframes.viz.Legend\" title=\"cartoframes.viz.Legend\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Legend</span></code></a> for more information.</p></li>\n<li><p><strong>widgets</strong> (dict, list, or <a class=\"reference internal\" href=\"../cartoframes.viz/#cartoframes.viz.WidgetList\" title=\"cartoframes.viz.WidgetList\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">WidgetList</span></code></a>, optional) \u2013 Widget or list of widgets for a layer. It contains the information to display\ndifferent widget types on the top right of the map. See\n<code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">WidgetList</span></code> for more information.</p></li>\n<li><p><strong>credentials</strong> (<a class=\"reference internal\" href=\"../cartoframes.auth/#cartoframes.auth.Credentials\" title=\"cartoframes.auth.Credentials\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Credentials</span></code></a>) \u2013 A Credentials instance. This is only used for the simplified Source API.\nWhen a <a class=\"reference internal\" href=\"../cartoframes.viz/#cartoframes.viz.Source\" title=\"cartoframes.viz.Source\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Source</span></code></a> is pased as source,\nthese credentials is simply ignored. If not provided the credentials will be\nautomatically obtained from the default credentials.</p></li>\n<li><p><strong>bounds</strong> (<em>dict</em><em> or </em><em>list</em><em>, </em><em>optional</em>) \u2013 a dict with <cite>west</cite>, <cite>south</cite>, <cite>east</cite>, <cite>north</cite>\nkeys, or an array of floats in the following structure: [[west,\nsouth], [east, north]]. If not provided the bounds will be automatically\ncalculated to fit all features.</p></li>\n</ul>\n</dd>\n</dl>\n<p class=\"rubric\">Example</p>\n<p>Create a layer with a custom popup, legend, and widget.</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">cartoframes.auth</span> <span class=\"k\">import</span> <span class=\"n\">set_default_credentials</span>\n<span class=\"kn\">from</span> <span class=\"nn\">cartoframes.viz</span> <span class=\"k\">import</span> <span class=\"n\">Layer</span>\n\n<span class=\"n\">set_default_credentials</span><span class=\"p\">(</span>\n    <span class=\"n\">base_url</span><span class=\"o\">=</span><span class=\"s1\">&#39;https://cartovl.carto.com&#39;</span><span class=\"p\">,</span>\n    <span class=\"n\">api_key</span><span class=\"o\">=</span><span class=\"s1\">&#39;default_public&#39;</span>\n<span class=\"p\">)</span>\n\n<span class=\"n\">Layer</span><span class=\"p\">(</span>\n    <span class=\"s2\">&quot;SELECT * FROM populated_places WHERE adm0name = &#39;Spain&#39;&quot;</span><span class=\"p\">,</span>\n    <span class=\"s1\">&#39;color: ramp(globalQuantiles($pop_max, 5), reverse(purpor))&#39;</span><span class=\"p\">,</span>\n    <span class=\"n\">popup</span><span class=\"o\">=</span><span class=\"p\">{</span>\n        <span class=\"s1\">&#39;hover&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;$name&#39;</span><span class=\"p\">,</span>\n        <span class=\"s1\">&#39;click&#39;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s1\">&#39;$name&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;$pop_max&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;$pop_min&#39;</span><span class=\"p\">]</span>\n    <span class=\"p\">},</span>\n    <span class=\"n\">legend</span><span class=\"o\">=</span><span class=\"p\">{</span>\n        <span class=\"s1\">&#39;type&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;color-category&#39;</span><span class=\"p\">,</span>\n        <span class=\"s1\">&#39;title&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;Population&#39;</span>\n    <span class=\"p\">},</span>\n    <span class=\"n\">widgets</span><span class=\"o\">=</span><span class=\"p\">[{</span>\n        <span class=\"s1\">&#39;type&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;formula&#39;</span><span class=\"p\">,</span>\n        <span class=\"s1\">&#39;title&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;Avg $pop_max&#39;</span><span class=\"p\">,</span>\n        <span class=\"s1\">&#39;value&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;viewportAvg($pop_max)&#39;</span>\n    <span class=\"p\">}]</span>\n<span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Create a layer specifically tied to a <a class=\"reference internal\" href=\"../cartoframes.auth/#cartoframes.auth.Credentials\" title=\"cartoframes.auth.Credentials\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Credentials</span></code></a> and display it on a map.</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">cartoframes.auth</span> <span class=\"k\">import</span> <span class=\"n\">Credentials</span>\n<span class=\"kn\">from</span> <span class=\"nn\">cartoframes.viz</span> <span class=\"k\">import</span> <span class=\"n\">Layer</span><span class=\"p\">,</span> <span class=\"n\">Map</span>\n\n<span class=\"n\">credentials</span> <span class=\"o\">=</span> <span class=\"n\">Credentials</span><span class=\"p\">(</span>\n    <span class=\"n\">base_url</span><span class=\"o\">=</span><span class=\"s1\">&#39;https://cartovl.carto.com&#39;</span><span class=\"p\">,</span>\n    <span class=\"n\">api_key</span><span class=\"o\">=</span><span class=\"s1\">&#39;default_public&#39;</span>\n<span class=\"p\">)</span>\n\n<span class=\"n\">pop_layer</span> <span class=\"o\">=</span> <span class=\"n\">Layer</span><span class=\"p\">(</span>\n    <span class=\"s1\">&#39;populated_places&#39;</span><span class=\"p\">,</span>\n    <span class=\"s1\">&#39;color: red&#39;</span><span class=\"p\">,</span>\n    <span class=\"n\">credentials</span><span class=\"o\">=</span><span class=\"n\">credentials</span>\n<span class=\"p\">)</span>\n<span class=\"n\">Map</span><span class=\"p\">(</span><span class=\"n\">pop_layer</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>Preview a layer in a Jupyter notebook. Note: if in a Jupyter notebook,\nit is not required to explicitly add a Layer to a <a class=\"reference internal\" href=\"../cartoframes.viz/#cartoframes.viz.Map\" title=\"cartoframes.viz.Map\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">Map</span></code></a> if only visualizing data as a single layer.</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">cartoframes.auth</span> <span class=\"k\">import</span> <span class=\"n\">set_default_credentials</span>\n<span class=\"kn\">from</span> <span class=\"nn\">cartoframes.viz</span> <span class=\"k\">import</span> <span class=\"n\">Layer</span><span class=\"p\">,</span> <span class=\"n\">Map</span>\n\n<span class=\"n\">set_default_credentials</span><span class=\"p\">(</span><span class=\"s1\">&#39;https://cartoframes.carto.com&#39;</span><span class=\"p\">)</span>\n\n<span class=\"n\">pop_layer</span> <span class=\"o\">=</span> <span class=\"n\">Layer</span><span class=\"p\">(</span>\n    <span class=\"s1\">&#39;brooklyn_poverty&#39;</span><span class=\"p\">,</span>\n    <span class=\"s1\">&#39;color: ramp($poverty_per_pop, sunset)&#39;</span><span class=\"p\">,</span>\n    <span class=\"n\">legend</span><span class=\"o\">=</span><span class=\"p\">{</span>\n        <span class=\"s1\">&#39;type&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;color-continuous&#39;</span><span class=\"p\">,</span>\n        <span class=\"s1\">&#39;title&#39;</span><span class=\"p\">:</span> <span class=\"s1\">&#39;Poverty per pop&#39;</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">)</span>\n<span class=\"n\">pop_layer</span>\n</pre></div>\n</div>\n</dd></dl>\n\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"]], "sourcename": "cartoframes.viz.layer.rst.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">cartoframes.viz.layer module</a></li>\n</ul>\n", "display_toc": false, "page_source_suffix": ".rst", "current_page_name": "cartoframes.viz.layer", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "alabaster_version": "0.7.12"}