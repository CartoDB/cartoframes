<!DOCTYPE html>
    <html>
      <head>
        <title>Carto</title>
        <meta name='viewport' content='initial-scale=1.0, user-scalable=no' />
        <meta http-equiv='content-type' content='text/html; charset=UTF-8' />
        <link rel='shortcut icon' href='http://cartodb.com/assets/favicon.ico' />

        <style>
        html, body, #map {
          height: 100%;
          padding: 0;
          margin: 0;
        }
        #zoom-center {
          position: absolute;
          right: 0;
          top: 0;
          background-color: rgba(255, 255, 255, 0.7);
          width: 240px;
          z-index: 100;
          padding: 4px;
        }
        </style>

        <link rel='stylesheet' href='https://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/3.15/themes/css/cartodb.css' />
      </head>
      <body>
        <div id='zoom-center'>
          zoom=<span id='zoom'>4</span>,
          lng=<span id='lon'>No data</span>, lat=<span id='lat'>No data</span>
        </div>
        <div id='map'></div>
        <script src='https://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/3.15/cartodb.js'></script>

        <script>
        const config  = {&quot;user_name&quot;: &quot;eschbacher&quot;, &quot;maps_api_template&quot;: &quot;https://eschbacher.carto.com&quot;, &quot;sql_api_template&quot;: &quot;https://eschbacher.carto.com&quot;, &quot;tiler_protocol&quot;: &quot;https&quot;, &quot;tiler_domain&quot;: &quot;carto.com&quot;, &quot;tiler_port&quot;: &quot;80&quot;, &quot;type&quot;: &quot;namedmap&quot;, &quot;named_map&quot;: {&quot;name&quot;: &quot;cartoframes_ver20170406_layers1_time0_baseid2_labels0_zoom0&quot;, &quot;params&quot;: {&quot;basemap_url&quot;: &quot;https://{s}.basemaps.cartocdn.com/rastertiles/voyager_labels_under/{z}/{x}/{y}.png&quot;, &quot;cartocss_0&quot;: &quot;#layer {  marker-width: 4; marker-fill: ramp([fare_amount], cartocolor(Sunset), quantiles(7), >); marker-fill-opacity: 0.9; marker-allow-overlap: true; marker-line-width: 0.5; marker-line-color: #FFF; marker-line-opacity: 1;}#layer[fare_amount = null] {  marker-fill: #ccc;}&quot;, &quot;sql_0&quot;: &quot;SELECT * FROM taxi_50k&quot;, &quot;west&quot;: -74.6638793945312, &quot;south&quot;: 40.5904769897461, &quot;east&quot;: -73.5582504272461, &quot;north&quot;: 41.1549949645996}}};
        const bounds  = [[41.1549949645996, -73.5582504272461], [40.5904769897461, -74.6638793945312]];
        const options = {&quot;filter&quot;: [&quot;mapnik&quot;, &quot;torque&quot;], &quot;https&quot;: true};
        var labels_url = '';

        const adjustLongitude = (lng) => (
          lng - ((Math.ceil((lng + 180) / 360) - 1) * 360)
        );
        const map = L.map('map', {
          zoom: 3,
          center: [0, 0],
        });

        if (L.Browser.retina) {
            var basemap = config.named_map.params.basemap_url.replace('.png', '@2x.png');
            labels_url = labels_url.replace('.png', '@2x.png');
        } else {
            var basemap = config.named_map.params.basemap_url;
        }
        L.tileLayer(basemap, {
            attribution: &quot;&copy; <a href=\&quot;http://www.openstreetmap.org/copyright\&quot;>OpenStreetMap</a>&quot;
        }).addTo(map);

        const updateMapInfo = () => {
          $('#zoom').text(map.getZoom());
          $('#lat').text(map.getCenter().lat.toFixed(4));
          $('#lon').text(adjustLongitude(map.getCenter().lng).toFixed(4));
        };

        cartodb.createLayer(map, config, options)
                .addTo(map)
                .done((layer) => {
                    // add labels layer
                    if (labels_url) {
                        var topPane = L.DomUtil.create('div', 'leaflet-top-pane', map.getPanes().mapPane);
                        var topLayer = new L.tileLayer(labels_url).addTo(map);
                        topPane.appendChild(topLayer.getContainer());
                        topLayer.setZIndex(7);
                    }

                    // fit map to bounds
                    if (bounds.length) {
                      map.fitBounds(bounds);
                    }

                    updateMapInfo();
                    map.on('move', () => {
                      updateMapInfo();
                    });
                })
                .error((err) => {
                  console.log('ERROR: ', err);
                });
        </script>

      </body>
    </html>